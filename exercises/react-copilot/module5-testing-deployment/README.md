# Module 5: Testing and Deployment

## Cel modułu
Kompleksowe testowanie aplikacji React i deployment strategies z wykorzystaniem GitHub Copilot do generowania testów i konfiguracji.

## User Stories i Ćwiczenia

### User Story 1: Unit testing z React Testing Library
**Jako deweloper, chcę mieć comprehensive unit tests dla wszystkich komponentów.**

#### Exercise (Intermediate):
1. Stwórz testy dla `MovieList` component z GitHub Copilot
2. Implementuj testy dla custom hooks
3. Dodaj snapshot testing

**Prompt dla Copilot:**
```typescript
// Generated by Copilot
// Unit tests dla MovieList component
// Test scenarios:
// - renderuje listę filmów poprawnie
// - pokazuje empty state gdy brak filmów
// - wywołuje onClick handler dla każdego filmu
// - filtruje filmy według search term
// - sortuje filmy według różnych kryteriów
// Użyj React Testing Library z user-event
// Mock external dependencies (API calls)
```

### User Story 2: Integration testing dla API calls
**Jako deweloper, chcę testować integration między components a API.**

#### Exercise (Advanced):
1. Stwórz integration tests z MSW (Mock Service Worker)
2. Testuj error scenarios i loading states
3. Implementuj test data factories

**Prompt dla Copilot:**
```typescript
// Generated by Copilot
// Integration tests dla Movies API
// Setup MSW handlers dla wszystkich endpoints
// Test scenarios:
// - successful CRUD operations
// - network errors (timeout, 500, 404)
// - loading states podczas API calls
// - optimistic updates i rollback
// Test data factories dla consistent test data
// Cleanup między testami
```

### User Story 3: E2E testing z Playwright
**Jako QA engineer, chcę automated E2E tests dla critical user flows.**

#### Exercise (Advanced):
1. Stwórz E2E tests z Playwright i GitHub Copilot
2. Implementuj page object pattern
3. Dodaj visual regression testing

**Prompt dla Copilot:**
```typescript
// Generated by Copilot
// E2E tests dla Movies application z Playwright
// Test scenarios:
// - add new movie complete flow
// - edit existing movie
// - delete movie with confirmation
// - search and filter movies
// - pagination through movie list
// Page Object Model dla reusable selectors i actions
// Visual regression tests dla key pages
// Cross-browser testing (Chrome, Firefox, Safari)
```

### User Story 4: Performance testing
**Jako deweloper, chcę monitorować performance aplikacji.**

#### Exercise (Advanced):
1. Implementuj performance tests z GitHub Copilot
2. Dodaj bundle size monitoring
3. Stwórz performance budgets

**Prompt dla Copilot:**
```typescript
// Generated by Copilot
// Performance testing setup dla React aplikacji
// Lighthouse CI dla automated performance audits
// Bundle analyzer dla monitoring bundle size
// Performance budgets: <250KB initial bundle, <50KB per route
// Core Web Vitals monitoring
// Memory leak detection tests
// Component render performance tests
```

### User Story 5: Accessibility testing
**Jako deweloper, chcę zapewnić accessibility compliance.**

#### Exercise (Intermediate):
1. Stwórz accessibility tests z axe-core
2. Implementuj keyboard navigation tests
3. Dodaj screen reader testing

**Prompt dla Copilot:**
```typescript
// Generated by Copilot
// Accessibility testing dla Movies application
// axe-core integration z React Testing Library
// Test scenarios:
// - wszystkie interactive elements dostępne z klawiatury
// - proper ARIA labels i roles
// - color contrast requirements
// - focus management w modalach
// - screen reader announcements
// Automated a11y tests w CI/CD pipeline
```

### User Story 6: Deployment configuration
**Jako DevOps engineer, chcę automated deployment pipeline.**

#### Exercise (Expert):
1. Stwórz deployment configs z GitHub Copilot
2. Implementuj multi-environment strategy
3. Dodaj monitoring i rollback capabilities

**Prompt dla Copilot:**
```typescript
// Generated by Copilot
// Deployment configuration dla React aplikacji
// Docker multi-stage build dla production
// GitHub Actions workflow:
//   - run tests na wszystkich PR
//   - deploy na staging po merge do main
//   - deploy na production po manual approval
// Environment-specific configurations
// Health checks i monitoring setup
// Rollback strategy w przypadku deployment failures
```

## Dodatkowe ćwiczenia

### Exercise 7: Zadania dla QA Automation Engineer
**Jako tester automatyczny, chcę stworzyć kompletne środowisko testowe dla aplikacji Movies.**

#### Exercise A: Test Automation Framework Setup (Expert)
1. Stwórz test automation framework z GitHub Copilot
2. Implementuj Page Object Model z TypeScript
3. Dodaj data-driven testing z CSV/JSON

**Prompt dla Copilot:**
```typescript
// Generated by Copilot
// Kompletny test automation framework dla Movies App
// Page Object Model z TypeScript classes
// BaseTest class z common setup i teardown
// TestData management z JSON fixtures
// Custom assertions dla Movies domain
// Parallel test execution configuration
// Test reporting z Allure lub podobnym
```

#### Exercise B: Comprehensive Test Suite dla Movies CRUD (Advanced)
**User Story:** Jako tester, chcę mieć pełne pokrycie testowe dla operacji CRUD na filmach.

**Test Scenarios do zaimplementowania:**
1. **Create Movie Tests:**
   - Poprawne dodanie nowego filmu z wszystkimi polami
   - Walidacja required fields (negative testing)
   - Walidacja formatów danych (data, cena)
   - Sprawdzenie duplikatów
   - Test długości pól (boundary testing)

2. **Read Movie Tests:**
   - Lista wszystkich filmów
   - Wyszukiwanie po ID
   - Filtrowanie po różnych kryteriach
   - Sortowanie po różnych kolumnach
   - Paginacja wyników

3. **Update Movie Tests:**
   - Aktualizacja wszystkich pól
   - Partial update (tylko wybrane pola)
   - Aktualizacja nieistniejącego filmu
   - Concurrent updates handling

4. **Delete Movie Tests:**
   - Usunięcie istniejącego filmu
   - Usunięcie nieistniejącego filmu
   - Cascade delete (jeśli są powiązania)
   - Soft delete vs hard delete

**Prompt dla Copilot:**
```typescript
// Generated by Copilot
// Comprehensive CRUD test suite dla Movies
// Test class MoviesCRUDTests z setup/teardown
// Data providers dla positive/negative scenarios
// Parametrized tests dla different input combinations
// API response validation z JSON schema
// Database state verification after operations
// Test data cleanup after each test
```

#### Exercise C: Advanced E2E Test Scenarios (Expert)
**User Story:** Jako tester, chcę automated tests dla complex user journeys.

**Complex Scenarios:**
1. **Multi-step Movie Management Workflow:**
   - Login jako admin
   - Dodaj 5 filmów z różnymi danymi
   - Wyszukaj filmy po różnych kryteriach
   - Edytuj 2 filmy
   - Usuń 1 film z potwierdzeniem
   - Zweryfikuj końcowy stan listy

2. **User Journey - Movie Discovery:**
   - Browse movies bez logowania
   - Użyj filters i search
   - View movie details
   - Attempt to add to favorites (redirect to login)
   - Login i add to favorites
   - Verify favorites list

3. **Error Handling Scenarios:**
   - Network disconnection podczas operacji
   - Server errors (500, 503)
   - Timeout scenarios
   - Invalid data submission
   - Concurrent user operations

**Prompt dla Copilot:**
```typescript
// Generated by Copilot
// Advanced E2E test scenarios dla Movies App
// Multi-step workflows z state verification
// Error simulation z network mocking
// Cross-browser compatibility tests
// Mobile responsive testing
// Performance testing podczas E2E flows
// Screenshot comparison dla UI changes
```

#### Exercise D: API Testing Suite z Postman/Newman (Intermediate)
**User Story:** Jako API tester, chcę automated API tests niezależne od UI.

**API Test Coverage:**
1. **Contract Testing:**
   - Request/Response schema validation
   - HTTP status codes verification
   - Headers validation
   - Content-Type verification

2. **Business Logic Testing:**
   - Data integrity checks
   - Business rules validation
   - Edge cases testing
   - Performance benchmarks

3. **Security Testing:**
   - Authentication scenarios
   - Authorization checks
   - Input validation
   - SQL injection attempts

**Prompt dla Copilot:**
```javascript
// Generated by Copilot
// Postman collection dla Movies API testing
// Pre-request scripts dla authentication
// Test scripts dla response validation
// Environment variables dla different stages
// Data-driven tests z CSV files
// Performance tests z load simulation
// Security tests dla common vulnerabilities
```

#### Exercise E: Visual Regression Testing (Advanced)
**User Story:** Jako tester, chcę wykrywać niezamierzone zmiany wizualne w UI.

**Visual Testing Scenarios:**
1. **Component-level Visual Tests:**
   - MovieCard w różnych stanach
   - Forms z validation errors
   - Modal dialogs
   - Loading states

2. **Page-level Visual Tests:**
   - Homepage w różnych rozdzielczościach
   - Movie details page
   - Search results page
   - Empty states

3. **Cross-browser Visual Testing:**
   - Chrome, Firefox, Safari, Edge
   - Different viewport sizes
   - Dark/Light theme variations

**Prompt dla Copilot:**
```typescript
// Generated by Copilot
// Visual regression testing setup z Playwright
// Screenshot comparison z baseline images
// Cross-browser visual testing
// Responsive design validation
// Theme variations testing
// Animation state capture
// Visual diff reporting z HTML output
```

#### Exercise F: Performance Testing Suite (Expert)
**User Story:** Jako performance tester, chcę monitorować wydajność aplikacji pod load.

**Performance Test Types:**
1. **Load Testing:**
   - Normal expected load (100 concurrent users)
   - Peak load simulation (500 concurrent users)
   - Sustained load over time

2. **Stress Testing:**
   - Breaking point identification
   - Recovery testing after stress
   - Memory leak detection

3. **Frontend Performance:**
   - Page load times
   - Core Web Vitals monitoring
   - Bundle size impact
   - API response times

**Prompt dla Copilot:**
```javascript
// Generated by Copilot
// Performance testing setup z K6 lub Artillery
// Load testing scenarios dla Movies API
// Frontend performance monitoring
// Database performance under load
// Memory usage tracking
// Response time percentiles analysis
// Performance regression detection
```

#### Exercise G: Accessibility Testing Automation (Intermediate)
**User Story:** Jako accessibility tester, chcę automated checks dla WCAG compliance.

**Accessibility Test Coverage:**
1. **Automated Accessibility Scanning:**
   - axe-core integration
   - WCAG 2.1 AA compliance
   - Color contrast validation
   - Keyboard navigation testing

2. **Screen Reader Testing:**
   - ARIA labels verification
   - Focus management
   - Semantic HTML structure
   - Skip links functionality

**Prompt dla Copilot:**
```typescript
// Generated by Copilot
// Accessibility testing automation setup
// axe-core integration z Playwright
// Keyboard navigation test automation
// Color contrast validation
// Screen reader simulation
// ARIA attributes verification
// Accessibility regression testing
```

### Exercise 8: Component testing strategies (Advanced)
Implementuj different testing strategies dla różnych typów komponentów.

### Exercise 9: Test data management (Intermediate)
Stwórz system do zarządzania test data across different test types.

### Exercise 10: CI/CD optimization (Expert)
Optymalizuj pipeline dla faster test execution i deployment.

## Required Testing Libraries
```bash
# Unit & Integration Testing
npm install --save-dev @testing-library/react @testing-library/jest-dom @testing-library/user-event
npm install --save-dev msw

# E2E Testing
npm install --save-dev @playwright/test

# Performance Testing
npm install --save-dev lighthouse-ci webpack-bundle-analyzer

# Accessibility Testing
npm install --save-dev @axe-core/react jest-axe

# Utilities
npm install --save-dev faker-js/faker
```

## Testing Strategy

### 1. Testing Pyramid
```
E2E Tests (Few, Slow, High Confidence)
    ↑
Integration Tests (Some, Medium Speed)
    ↑
Unit Tests (Many, Fast, Low Level)
```

### 2. What to Test
- **Unit**: Component logic, hooks, utilities
- **Integration**: Component interactions, API integration
- **E2E**: Critical user journeys, cross-browser compatibility

### 3. What NOT to Test
- Implementation details
- Third-party library internals
- Trivial code (getters/setters)

## Test Organization
```
src/
├── components/
│   ├── MovieList.tsx
│   └── __tests__/
│       ├── MovieList.test.tsx
│       └── MovieList.integration.test.tsx
├── hooks/
│   ├── useMovies.ts
│   └── __tests__/
│       └── useMovies.test.ts
└── utils/
    └── test-utils.tsx

tests/
├── e2e/
│   ├── movies.spec.ts
│   └── pages/
│       └── MoviesPage.ts
├── fixtures/
└── mocks/
```

## Deployment Strategies

### 1. Environment Configuration
```typescript
// Generated by Copilot
// Environment-specific configuration
// Development: hot reload, debug tools
// Staging: production-like, test data
// Production: optimized build, monitoring
```

### 2. Build Optimization
```typescript
// Generated by Copilot
// Webpack/Vite configuration dla production
// Code splitting strategies
// Asset optimization (images, fonts)
// Compression i caching headers
// Bundle analysis i tree shaking
```

### 3. Monitoring Setup
```typescript
// Generated by Copilot
// Application monitoring configuration
// Error tracking (Sentry, Bugsnag)
// Performance monitoring (Web Vitals)
// User analytics (Google Analytics)
// Feature flags dla gradual rollouts
```

## CI/CD Pipeline Example
```yaml
# Generated by Copilot
# GitHub Actions workflow
name: CI/CD Pipeline

on:
  pull_request:
    branches: [main]
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '18'
      - name: Install dependencies
        run: npm ci
      - name: Run unit tests
        run: npm run test:unit
      - name: Run integration tests
        run: npm run test:integration
      - name: Run E2E tests
        run: npm run test:e2e
      - name: Performance audit
        run: npm run test:lighthouse
```

## Quality Gates
1. **Code Coverage**: Minimum 80% dla unit tests
2. **Performance**: Lighthouse score > 90
3. **Accessibility**: No axe-core violations
4. **Bundle Size**: < 250KB initial load
5. **E2E Tests**: All critical paths passing

## Debugging Tests
```typescript
// Generated by Copilot
// Debugging strategies dla different test types
// Unit tests: console.log, debugger statements
// Integration tests: MSW logging, network inspection
// E2E tests: Playwright trace viewer, screenshots
// Performance tests: Chrome DevTools, Lighthouse reports
```

## Test Data Management
```typescript
// Generated by Copilot
// Test data factories i fixtures
// Faker.js dla realistic test data
// Shared fixtures dla consistent data
// Database seeding dla integration tests
// Test data cleanup strategies
```

## Oczekiwane rezultaty
Po ukończeniu tego modułu powinieneś umieć:
- Pisać comprehensive unit i integration tests
- Implementować E2E testing strategies
- Konfigurować automated deployment pipelines
- Monitorować performance i accessibility
- Używać GitHub Copilot do generowania test code
- Implementować quality gates i monitoring
- Debugować i optymalizować test suites

## 🎯 QA Automation Engineer - Praktyczne Zadania

### Zadanie 1: Test Automation Framework (2-3 dni)
**Cel:** Stworzenie kompletnego framework'a do automatyzacji testów dla Movies App

**Do wykonania:**
1. **Setup projektu testowego:**
   ```bash
   # Generated by Copilot
   # Inicjalizacja projektu testowego
   mkdir movies-test-automation
   cd movies-test-automation
   npm init -y
   npm install --save-dev @playwright/test @faker-js/faker allure-playwright
   ```

2. **Struktura projektu:**
   ```
   movies-test-automation/
   ├── tests/
   │   ├── api/           # API tests
   │   ├── e2e/           # End-to-end tests
   │   ├── visual/        # Visual regression tests
   │   └── performance/   # Performance tests
   ├── pages/             # Page Object Model
   ├── fixtures/          # Test fixtures i setup
   ├── utils/             # Test utilities
   ├── data/              # Test data
   └── reports/           # Test reports
   ```

3. **Implementacja Page Object Model** z GitHub Copilot pomocą prompt:
   ```typescript
   // Generated by Copilot
   // Complete Page Object Model dla Movies application
   // Include all pages: HomePage, MoviesListPage, MovieDetailsPage, AddMoviePage
   // Each page should have selectors, actions, and verifications
   // Use TypeScript dla type safety
   ```

**Kryteria akceptacji:**
- [ ] Framework uruchamia się bez błędów
- [ ] Page Objects dla wszystkich głównych stron
- [ ] Base test class z common setup
- [ ] Test data factory z faker.js
- [ ] Configuration dla różnych environments

### Zadanie 2: Comprehensive API Testing (1-2 dni)
**Cel:** Pokrycie wszystkich endpoints Movies API testami automatycznymi

**Endpoints do przetestowania:**
- `GET /api/movies` - lista filmów
- `GET /api/movies/{id}` - szczegóły filmu
- `POST /api/movies` - dodanie filmu
- `PUT /api/movies/{id}` - aktualizacja filmu
- `DELETE /api/movies/{id}` - usunięcie filmu

**Test scenarios do implementacji:**
```typescript
// Generated by Copilot
// API test scenarios dla Movies endpoints:
// 1. Happy path tests - wszystkie operacje CRUD
// 2. Negative tests - invalid data, non-existent IDs
// 3. Boundary tests - edge cases dla pól
// 4. Performance tests - response times
// 5. Contract tests - schema validation
```

**Zadania szczegółowe:**
1. **Positive Test Cases:**
   - Wszystkie CRUD operations z valid data
   - Pagination testing dla GET /movies
   - Search i filtering functionality

2. **Negative Test Cases:**
   - Invalid input data (null, empty, wrong types)
   - Non-existent movie IDs
   - Duplicate movie creation
   - Invalid authentication (jeśli applicable)

3. **Data-driven tests:**
   - Multiple test data sets z JSON/CSV
   - Parametrized tests dla różnych scenarios

**Kryteria akceptacji:**
- [ ] 100% coverage wszystkich endpoints
- [ ] Response schema validation
- [ ] Error handling verification
- [ ] Performance benchmarks established
- [ ] Test data cleanup po każdym teście

### Zadanie 3: E2E User Journey Testing (2-3 dni)
**Cel:** Automatyzacja kompletnych user journeys w aplikacji

**User Journeys do zaimplementowania:**
1. **Admin Movie Management Journey:**
   ```typescript
   // Generated by Copilot
   // Complete admin workflow:
   // 1. Login jako admin
   // 2. Navigate to movies management
   // 3. Add 3 new movies z różnymi danymi
   // 4. Search/filter movies
   // 5. Edit existing movie
   // 6. Delete movie z confirmation
   // 7. Verify wszystkie changes
   ```

2. **User Movie Discovery Journey:**
   ```typescript
   // Generated by Copilot
   // User discovery workflow:
   // 1. Browse movies bez logowania
   // 2. Use search i filters
   // 3. View movie details
   // 4. Attempt to add favorites (redirect to login)
   // 5. Login i add to favorites
   // 6. Create watchlist
   // 7. Verify favorites i watchlist
   ```

3. **Error Handling Journey:**
   ```typescript
   // Generated by Copilot
   // Error scenarios testing:
   // 1. Network disconnection podczas operations
   // 2. Server errors simulation (500, 503)
   // 3. Invalid form submissions
   // 4. Concurrent user operations
   // 5. Recovery mechanisms testing
   ```

**Advanced scenarios:**
- Cross-browser compatibility testing
- Mobile responsive testing
- Performance under load
- Accessibility compliance

**Kryteria akceptacji:**
- [ ] Wszystkie critical user paths covered
- [ ] Cross-browser testing (Chrome, Firefox, Safari)
- [ ] Mobile responsive tests
- [ ] Error recovery verification
- [ ] Performance metrics collected

### Zadanie 4: Visual Regression Testing (1 dzień)
**Cel:** Wykrywanie niezamierzonej
